<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="styles.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="scripts.js" charset="utf-8"></script>
<script type="text/javascript">

$(document).ready(function() {
	$('#loading').css('top', '30px');
	$('#loading').css('display', 'block');

	chrome.extension.sendRequest({action: 'loadUsage'}, function(response) {});
});

/**
* Handles data sent via chrome.extension.sendRequest().
* @param request Object Data sent in the request.
* @param sender Object Origin of the request.
* @param sendResponse Function The method to call when the request completes.
*/
function onRequest(request, sender, sendResponse) {
	switch(request.action) {
		case 'show':
			show();
	}
	sendResponse({});
	return;
};

// Wire up the listener.
chrome.extension.onRequest.addListener(onRequest);

function translate() {
	$('#needs_config').html(tt("needs_config", chrome.extension.getURL('options.html')));
	$('#loading').html(t("loading_please_wait"));
	$('#ohnoes').html(tt("oh_noes_error", ""));
	$('#this_month_intro').html(t("this_month"));
	$('#this_month_down_suffix').html(t("download"));
	$('#this_month_up_suffix').html(t("upload"));
	$('#last_updated_intro').html(t("last_updated"));
}
</script>
</head>
<body>
	<div id="front">
		<div id="loading">Loading... Please wait.</div>
		<div id="needs_config" class="title"></div>
		<div id="ohnoes" style="display:none">Oh Noes! There's been an error.</div>

		<div id="this_month" style="display:none">
			<span class="title">
				<span id="this_month_intro">This month</span> 
				<span id="this_month_start" class="dates"></span>
			</span><br/>
			<span id="this_month_down"></span> (<span id="this_month_down_suffix">download</span>)
			+ <span id="this_month_up"></span> (<span id="this_month_up_suffix">upload</span>)
			= <span id="this_month_total"></span>
			<img id="this_month_loader" class="loader" src="Images/loader.gif" width="16" height="16" style="display: none" valign="middle" />

			<br/><br/>
			<div id="this_month_meter_1">
				<img src="Images/meter.png" width="360" height="10" style="border: 1px solid black" />
				<span id="this_month_meter_1_start" class="meter_start"></span>
				<span id="this_month_meter_1_end" class="meter_end"></span>
				<span id="this_month_meter_1_text" class="meter_text">Download + Upload</span>
				<span id="this_month_percentage_1" class="meter_text meter_percentage" style="left: 280px"></span>
			</div>
			<span id="this_month_now_1" style="position: absolute; top: 104px; display: none">
				<img id="this_month_now_1_img" src="Images/now.gif" width="7" height="20" />
			</span>
		</div>
		
		<div id="this_month_bandwidth" style="display:none;width:94%"><span id="this_month_now_bw_usage"></span></div>

		<br/>
		<div id="last_month" style="display:none">
			<span class="title">Last month <span id="last_month_dates" class="dates"></span></span><br/>
			<span id="last_month_down"></span> (download)
			+ <span id="last_month_up"></span> (upload)
			= <span id="last_month_total"></span>
		</div>

		<div id="previous_month" style="display:none">
			<span class="title">2 month ago <span id="previous_month_dates" class="dates"></span></span><br/>
			<span id="previous_month_down"></span> (download)
			+ <span id="previous_month_up"></span> (upload)
			= <span id="previous_month_total"></span>
		</div>
	
		<br/>
		<div id="last_updated" style="display:none">
			<span id="last_updated_intro">Last updated</span>: 
			<span id="this_month_end">?</span>
		</div>
    </div>
</body>
</html>
